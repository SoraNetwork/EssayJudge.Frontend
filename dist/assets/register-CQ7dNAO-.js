import{Q as C,R as N,r as o,V,W as v,X as t,x as l,_ as s,ab as _,a5 as T,$ as b}from"./index-DrtXJ76k.js";import{V as U,b as A,d as m,e as B,k as D}from"./VTextField-Cbwj9afB.js";import{a as F,V as R}from"./VRow-9Ta8N-Ip.js";import{V as S,a as q}from"./VToolbar-Coa4CNzf.js";import{V as P}from"./VForm-CzPAKgQp.js";import{V as w}from"./VAlert-DwnNhemx.js";import{V as $}from"./VSpacer-B133BwxA.js";import{V as x}from"./VAvatar-D6tovhXD.js";import{V as j}from"./VContainer-Bmf_UuCc.js";/* empty css              */const L=C({__name:"register",setup(M){const k=N(),i=o(""),p=o(""),u=o(""),n=o(""),f=o(!1),r=o(""),d=o(""),c=o(null);async function y(){const{valid:g}=await c.value.validate();if(g){f.value=!0,r.value="",d.value="";try{const e=new FormData;e.append("Username",i.value),e.append("Password",p.value),u.value&&e.append("Name",u.value),n.value&&e.append("PhoneNumber",n.value),await D.post("/api/Auth/register",e),d.value="注册成功！即将跳转到登录页面...",setTimeout(()=>{k.push("/login")},3e3)}catch(e){console.error("注册失败:",e),e.response?r.value=e.response.data.message||"注册失败，请稍后重试":r.value="网络错误，请稍后重试"}finally{f.value=!1}}}return(g,e)=>(v(),V(j,{class:"fill-height",fluid:""},{default:t(()=>[l(F,{align:"center",justify:"center"},{default:t(()=>[l(R,{cols:"12",sm:"8",md:"6",lg:"4"},{default:t(()=>[l(U,{class:"elevation-12"},{default:t(()=>[l(S,{color:"primary",dark:""},{default:t(()=>[l(q,null,{default:t(()=>e[4]||(e[4]=[s("注册账号")])),_:1,__:[4]})]),_:1}),l(A,null,{default:t(()=>[l(P,{onSubmit:T(y,["prevent"]),ref_key:"form",ref:c},{default:t(()=>[l(m,{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=a=>i.value=a),label:"用户名",name:"username","prepend-icon":"mdi-account",type:"text",rules:[a=>!!a||"用户名不能为空"],required:""},null,8,["modelValue","rules"]),l(m,{modelValue:p.value,"onUpdate:modelValue":e[1]||(e[1]=a=>p.value=a),label:"密码",name:"password","prepend-icon":"mdi-lock",type:"password",rules:[a=>!!a||"密码不能为空",a=>a.length>=6||"密码至少6个字符"],required:""},null,8,["modelValue","rules"]),l(m,{modelValue:u.value,"onUpdate:modelValue":e[2]||(e[2]=a=>u.value=a),label:"真实姓名",name:"name","prepend-icon":"mdi-account-badge",type:"text"},null,8,["modelValue"]),l(m,{modelValue:n.value,"onUpdate:modelValue":e[3]||(e[3]=a=>n.value=a),label:"手机号",name:"phoneNumber","prepend-icon":"mdi-phone",type:"tel",rules:[a=>!a||/^1\d{10}$/.test(a)||"请输入有效的手机号"]},null,8,["modelValue","rules"])]),_:1},512),r.value?(v(),V(w,{key:0,type:"error",variant:"tonal",class:"mt-4"},{default:t(()=>[s(b(r.value),1)]),_:1})):_("",!0),d.value?(v(),V(w,{key:1,type:"success",variant:"tonal",class:"mt-4"},{default:t(()=>[s(b(d.value),1)]),_:1})):_("",!0)]),_:1}),l(B,null,{default:t(()=>[l($),l(x,{to:"/login",variant:"text"},{default:t(()=>e[5]||(e[5]=[s("返回登录")])),_:1,__:[5]}),l(x,{color:"primary",onClick:y,loading:f.value},{default:t(()=>e[6]||(e[6]=[s("注册")])),_:1,__:[6]},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}});export{L as default};
