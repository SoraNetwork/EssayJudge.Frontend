import{Q as k,R as N,r as o,V,W as v,X as t,x as l,_ as s,a0 as _,a6 as T,Z as b}from"./index--uryIc9t.js";import{V as w,w as U}from"./VAvatar-Cjt3-t6c.js";import{a as A,V as B}from"./VRow-D5wFdFeI.js";import{V as D,b as F,c as R}from"./VCard-Baw6fKXM.js";import{V as S,a as q}from"./VToolbar-BOyHh6HU.js";import{V as P}from"./VForm-E8O1qvQD.js";import{a as d}from"./VTextField-B7WNoRZT.js";import{V as x}from"./VAlert-CQi6o4jK.js";import{V as j}from"./VSpacer-mriSOV0H.js";import{V as M}from"./VContainer-SGdNZFVY.js";/* empty css              */import"./forwardRefs-TdIUcFqw.js";const O=k({__name:"register",setup(Q){const C=N(),i=o(""),p=o(""),u=o(""),n=o(""),f=o(!1),r=o(""),m=o(""),c=o(null);async function y(){const{valid:g}=await c.value.validate();if(g){f.value=!0,r.value="",m.value="";try{const e=new FormData;e.append("Username",i.value),e.append("Password",p.value),u.value&&e.append("Name",u.value),n.value&&e.append("PhoneNumber",n.value),await U.post("/api/Auth/register",e),m.value="注册成功！即将跳转到登录页面...",setTimeout(()=>{C.push("/login")},3e3)}catch(e){console.error("注册失败:",e),e.response?r.value=e.response.data.message||"注册失败，请稍后重试":r.value="网络错误，请稍后重试"}finally{f.value=!1}}}return(g,e)=>(v(),V(M,{class:"fill-height",fluid:""},{default:t(()=>[l(A,{align:"center",justify:"center"},{default:t(()=>[l(B,{cols:"12",sm:"8",md:"6",lg:"4"},{default:t(()=>[l(D,{class:"elevation-12"},{default:t(()=>[l(S,{color:"primary",dark:""},{default:t(()=>[l(q,null,{default:t(()=>e[4]||(e[4]=[s("注册账号")])),_:1,__:[4]})]),_:1}),l(F,null,{default:t(()=>[l(P,{onSubmit:T(y,["prevent"]),ref_key:"form",ref:c},{default:t(()=>[l(d,{modelValue:i.value,"onUpdate:modelValue":e[0]||(e[0]=a=>i.value=a),label:"用户名",name:"username","prepend-icon":"mdi-account",type:"text",rules:[a=>!!a||"用户名不能为空"],required:""},null,8,["modelValue","rules"]),l(d,{modelValue:p.value,"onUpdate:modelValue":e[1]||(e[1]=a=>p.value=a),label:"密码",name:"password","prepend-icon":"mdi-lock",type:"password",rules:[a=>!!a||"密码不能为空",a=>a.length>=6||"密码至少6个字符"],required:""},null,8,["modelValue","rules"]),l(d,{modelValue:u.value,"onUpdate:modelValue":e[2]||(e[2]=a=>u.value=a),label:"真实姓名",name:"name","prepend-icon":"mdi-account-badge",type:"text"},null,8,["modelValue"]),l(d,{modelValue:n.value,"onUpdate:modelValue":e[3]||(e[3]=a=>n.value=a),label:"手机号",name:"phoneNumber","prepend-icon":"mdi-phone",type:"tel",rules:[a=>!a||/^1\d{10}$/.test(a)||"请输入有效的手机号"]},null,8,["modelValue","rules"])]),_:1},512),r.value?(v(),V(x,{key:0,type:"error",variant:"tonal",class:"mt-4"},{default:t(()=>[s(b(r.value),1)]),_:1})):_("",!0),m.value?(v(),V(x,{key:1,type:"success",variant:"tonal",class:"mt-4"},{default:t(()=>[s(b(m.value),1)]),_:1})):_("",!0)]),_:1}),l(R,null,{default:t(()=>[l(j),l(w,{to:"/login",variant:"text"},{default:t(()=>e[5]||(e[5]=[s("返回登录")])),_:1,__:[5]}),l(w,{color:"primary",onClick:y,loading:f.value},{default:t(()=>e[6]||(e[6]=[s("注册")])),_:1,__:[6]},8,["loading"])]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}))}});export{O as default};
